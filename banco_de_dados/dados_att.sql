create database bigrypto;
use bigrypto;

drop database bigrypto;

create table moeda (
	idMoeda int primary key auto_increment,
    nome varchar(45)
);
 create table ano (
	idAno int primary key
);
create table moedaAno (
	fkMoeda int,
    fkAno int,
    mes int,
    media decimal(10,2),
    primary key(fkMoeda, fkAno, mes),
    foreign key(fkMoeda) references moeda(idMoeda),
    foreign key(fkAno) references ano(idAno)
);

CREATE TABLE usuario (
	id INT PRIMARY KEY AUTO_INCREMENT,
	nome VARCHAR(50),
	email VARCHAR(50),
	senha VARCHAR(50)
);

insert into usuario values (null, 'bruno', 'bruno@gmail.com', 123321);

-- Moedas disponíveis para consulta
insert into moeda values
	(null, 'Dolar'),
	(null, 'Bitcoin'),
	(null, 'Ethereum'),
	(null, 'Solana');

-- Anos disponíveis para consulta
insert into ano values
	(2017), (2018),	(2019), (2020), (2021), (2022);

-- Dolar
insert into moedaAno values
	(1, 2017, 1, 3.20),
	(1, 2017, 2, 3.10),
	(1, 2017, 3, 3.13),
	(1, 2017, 4, 3.14),
	(1, 2017, 5, 3.24),
	(1, 2017, 6, 3.30),
	(1, 2017, 7, 3.21),
	(1, 2017, 8, 3.16),
	(1, 2017, 9, 3.14),
	(1, 2017, 10, 3.20),
	(1, 2017, 11, 3.26),
	(1, 2017, 12, 3.28),
    (1, 2018, 1, 3.20),
	(1, 2018, 2, 3.23),
	(1, 2018, 3, 3.27),
	(1, 2018, 4, 3.41),
	(1, 2018, 5, 3.63),
	(1, 2018, 6, 3.81),
	(1, 2018, 7, 3.82),
	(1, 2018, 8, 3.92),
	(1, 2018, 9, 4.09),
	(1, 2018, 10, 3.83),
	(1, 2018, 11, 3.80),
	(1, 2018, 12, 3.88),
    (1, 2019, 1, 3.72),
	(1, 2019, 2, 3.72),
	(1, 2019, 3, 3.86),
	(1, 2019, 4, 3.91),
	(1, 2019, 5, 4.01),
	(1, 2019, 6, 3.86),
	(1, 2019, 7, 3.80),
	(1, 2019, 8, 3.97), 
	(1, 2019, 9, 4.12),
	(1, 2019, 10, 4.07),
	(1, 2019, 11, 4.12),
	(1, 2019, 12, 4.13),
    (1, 2020, 1, 4.14),
	(1, 2020, 2, 4.37),
	(1, 2020, 3, 4.84),
	(1, 2020, 4, 5.36),
	(1, 2020, 5, 5.60),
	(1, 2020, 6, 5.18),
	(1, 2020, 7, 5.27),
	(1, 2020, 8, 5.48),
	(1, 2020, 9, 5.45),
	(1, 2020, 10, 5.56),
	(1, 2020, 11, 5.48),
	(1, 2020, 12, 5.18),
    (1, 2021, 1, 5.33),
	(1, 2021, 2, 5.43),
	(1, 2021, 3, 5.66),
	(1, 2021, 4, 5.55),
	(1, 2021, 5, 5.32),
	(1, 2021, 6, 5.04),
	(1, 2021, 7, 5.13),
	(1, 2021, 8, 5.28),
	(1, 2021, 9, 5.30),
	(1, 2021, 10, 5.55),
	(1, 2021, 11, 5.54),
	(1, 2021, 12, 5.64),
    (1, 2022, 1, 5.53),
	(1, 2022, 2, 5.17),
	(1, 2022, 3, 4.93),
	(1, 2022, 4, 4.83),
	(1, 2022, 5, 4.94),
	(1, 2022, 6, 5.00),
	(1, 2022, 7, 5.33),
	(1, 2022, 8, 5.16),
	(1, 2022, 9, 5.26),
	(1, 2022, 10, 5.24),
	(1, 2022, 11, 5.25),
	(1, 2022, 12, 5.24);

-- Bitcoin
insert into moedaAno values
    (2, 2017, 1, 3133),
	(2, 2017, 2, 3338),
	(2, 2017, 3, 3415),
	(2, 2017, 4, 3849),
	(2, 2017, 5, 6722),
	(2, 2017, 6, 8845),
	(2, 2017, 7, 8000),
	(2, 2017, 8, 8701),
	(2, 2017, 9, 18000),
	(2, 2017, 10, 14250),
	(2, 2017, 11, 21950),
	(2, 2017, 12, 39248),
    (2, 2018, 1, 48206),
	(2, 2018, 2, 31799),
	(2, 2018, 3, 34500),
	(2, 2018, 4, 24150),
	(2, 2018, 5, 32430),
	(2, 2018, 6, 28249),
	(2, 2018, 7, 24849),
	(2, 2018, 8, 29490),
	(2, 2018, 9, 29040),
	(2, 2018, 10, 26730),
	(2, 2018, 11, 23800),
	(2, 2018, 12, 15600),
    (2, 2019, 1, 14884),
	(2, 2019, 2, 12747),
	(2, 2019, 3, 14415),
	(2, 2019, 4, 16450),
	(2, 2019, 5, 21090),
	(2, 2019, 6, 34742),
	(2, 2019, 7, 43290),
	(2, 2019, 8, 37850),
	(2, 2019, 9, 40206),
	(2, 2019, 10, 34505),
	(2, 2019, 11, 37400),
	(2, 2019, 12, 32380),
    (2, 2020, 1, 29201),
	(2, 2020, 2, 39891),
	(2, 2020, 3, 39000),
	(2, 2020, 4, 32769),
	(2, 2020, 5, 46700),
	(2, 2020, 6, 50861),
	(2, 2020, 7, 50200),
	(2, 2020, 8, 59164),
	(2, 2020, 9, 64400),
	(2, 2020, 10, 60911),
	(2, 2020, 11, 79405),
	(2, 2020, 12, 104500),
    (2, 2021, 1, 152762),
	(2, 2021, 2, 182999),
	(2, 2021, 3, 257000),
	(2, 2021, 4, 332825),
	(2, 2021, 5, 317750),
	(2, 2021, 6, 194602),
	(2, 2021, 7, 175730),
	(2, 2021, 8, 215500),
	(2, 2021, 9, 246233),
	(2, 2021, 10, 237050),
	(2, 2021, 11, 349143),
	(2, 2021, 12, 322889),
    (2, 2022, 1, 261326),
	(2, 2022, 2, 206178),
	(2, 2022, 3, 222192),
	(2, 2022, 4, 217397),
	(2, 2022, 5, 188783),
	(2, 2022, 6, 151553),
	(2, 2022, 7, 104322),
	(2, 2022, 8, 124500),
	(2, 2022, 9, 104681),
	(2, 2022, 10, 104594),
	(2, 2022, 11, 106963),
	(2, 2022, 12, 89912);

-- Ethereum
insert into moedaAno values
    (3, 2017, 1, 26),
	(3, 2017, 2, 33),
	(3, 2017, 3, 49),
	(3, 2017, 4, 156),
	(3, 2017, 5, 270),
	(3, 2017, 6, 720),
	(3, 2017, 7, 884),
	(3, 2017, 8, 634),
	(3, 2017, 9, 1216),
	(3, 2017, 10, 971),
	(3, 2017, 11, 990),
	(3, 2017, 12, 1417),
    (3, 2018, 1, 2357),
	(3, 2018, 2, 3611),
	(3, 2018, 3, 2787),
	(3, 2018, 4, 1343),
	(3, 2018, 5, 2553),
	(3, 2018, 6, 2207),
	(3, 2018, 7, 1729),
	(3, 2018, 8, 1692),
	(3, 2018, 9, 1153),
	(3, 2018, 10, 891),
	(3, 2018, 11, 754),
	(3, 2018, 12, 441),
    (3, 2019, 1, 490),
	(3, 2019, 2, 397),
	(3, 2019, 3, 522),
	(3, 2019, 4, 554),
	(3, 2019, 5, 648),
	(3, 2019, 6, 1034),
	(3, 2019, 7, 1110),
	(3, 2019, 8, 862),
	(3, 2019, 9, 707),
	(3, 2019, 10, 734),
	(3, 2019, 11, 751),
	(3, 2019, 12, 625),
    (3, 2020, 1, 534),
	(3, 2020, 2, 786),
	(3, 2020, 3, 1052),
	(3, 2020, 4, 712),
	(3, 2020, 5, 1154),
	(3, 2020, 6, 1198),
	(3, 2020, 7, 1188),
	(3, 2020, 8, 1898),
	(3, 2020, 9, 2364),
	(3, 2020, 10, 1998),
	(3, 2020, 11, 2117),
	(3, 2020, 12, 3194),
    (3, 2021, 1, 3922),
	(3, 2021, 2, 7127),
	(3, 2021, 3, 8031),
	(3, 2021, 4, 10649),
	(3, 2021, 5, 14748),
	(3, 2021, 6, 13648),
	(3, 2021, 7, 11668),
	(3, 2021, 8, 13363),
	(3, 2021, 9, 18177),
	(3, 2021, 10, 15899),
	(3, 2021, 11, 23752),
	(3, 2021, 12, 26105),
    (3, 2022, 1, 20337),
	(3, 2022, 2, 13890),
	(3, 2022, 3, 14407),
	(3, 2022, 4, 15853),
	(3, 2022, 5, 13472),
	(3, 2022, 6, 9709),
	(3, 2022, 7, 5698),
	(3, 2022, 8, 8668),
	(3, 2022, 9, 8177),
	(3, 2022, 10, 6962),
	(3, 2022, 11, 8257),
	(3, 2022, 12, 6782);

-- Solana
insert into moedaAno values
	(4, 2020, 8, 8),
	(4, 2020, 9, 25),
	(4, 2020, 10, 15),
	(4, 2020, 11, 8),
	(4, 2020, 12, 10),
    (4, 2021, 1, 8),
	(4, 2021, 2, 23),
	(4, 2021, 3, 73),
	(4, 2021, 4, 107),
	(4, 2021, 5, 126),
	(4, 2021, 6, 164),
	(4, 2021, 7, 182),
	(4, 2021, 8, 193),
	(4, 2021, 9, 808),
	(4, 2021, 10, 783),
	(4, 2021, 11, 1122),
	(4, 2021, 12, 1175),
    (4, 2022, 1, 940),
	(4, 2022, 2, 514),
	(4, 2022, 3, 491),
	(4, 2022, 4, 593),
	(4, 2022, 5, 418),
	(4, 2022, 6, 228),
	(4, 2022, 7, 179),
	(4, 2022, 8, 218),
	(4, 2022, 9, 165),
	(4, 2022, 10, 174),
	(4, 2022, 11, 170),
	(4, 2022, 12, 74);


select * from moeda;
select * from ano;
select * from moedaAno;
select * from usuario;

create user 'bigrypto'@'localhost' identified by 'urubu100';
grant all on bigrypto.* to 'bigrypto'@'localhost';
flush privileges;

use bigrypto;

select media from moedaAno where fkMoeda = 1 and fkAno = 2017;



